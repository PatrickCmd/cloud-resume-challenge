# Cognito Configuration Outputs

This directory contains the configuration files generated by the Cognito setup playbook.

## Files

- `cognito-config.env` - Environment variables format (use in .env files)
- `cognito-config.json` - JSON format (use for programmatic access)

## Security Warning

**IMPORTANT**: These files contain sensitive credentials including:
- User Pool IDs
- Client IDs
- Temporary password for owner account

### Best Practices

1. **Immediately** copy the temporary password to a secure location (password manager)
2. **Delete** or secure these files after extracting the needed information
3. **Never** commit these files to version control
4. Use environment variables or AWS Parameter Store for production deployments

## Usage in Backend

Copy the values from `cognito-config.env` to your backend `.env` file:

```bash
cp cognito-config.env ../../backend/.env
# Or manually copy the values you need
```

## Usage in SAM Template

Add the JWT Authorizer configuration to your `template.yaml`:

```yaml
PortfolioApi:
  Type: AWS::Serverless::Api
  Properties:
    Auth:
      Authorizers:
        CognitoAuthorizer:
          UserPoolArn: !Sub 'arn:aws:cognito-idp:${AWS::Region}:${AWS::AccountId}:userpool/${CognitoUserPoolId}'
          Identity:
            Header: Authorization
```

## First Login

After setup, the owner must:

1. Use the temporary password to login via the API or Cognito Hosted UI
2. Change the password to a permanent one
3. (Optional) Set up MFA for enhanced security

## Cleanup

After successfully configuring your backend and testing the authentication:

```bash
# Securely delete the configuration files
rm cognito-config.env
rm cognito-config.json
```
